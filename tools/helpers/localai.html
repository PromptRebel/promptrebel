<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>PromptRebel ‚Äì Local AI</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    :root { --scroll: 0; }

    /* --- Reset / Basics --- */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    html, body { height: 100%; scroll-behavior: smooth; }

    body{
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background:#020617;
      color:#e5e7eb;
      line-height:1.6;
      padding-top:64px;
    }
    a { color: inherit; text-decoration: none; }

    /* --- Background / Noise / Glows (wie Games) --- */
    body::before{
      content:"";
      position:fixed;
      inset:0;
      background:
        radial-gradient(circle at 10% 0%, rgba(236,72,153,0.35), transparent 55%),
        radial-gradient(circle at 90% 100%, rgba(56,189,248,0.35), transparent 55%);
      z-index:-2;
    }
    body::after{
      content:"";
      position:fixed;
      inset:0;
      opacity:0.22;
      pointer-events:none;
      background-image:
        linear-gradient(0deg, rgba(255,255,255,0.05) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255,255,255,0.05) 1px, transparent 1px);
      background-size:3px 3px, 3px 3px;
      mix-blend-mode:soft-light;
      z-index:-1;
    }

    .page{ max-width:1120px; margin:0 auto; padding:16px 16px 40px; }

    /* --- Skip-Link --- */
    .skip-link{
      position:absolute;
      left:50%;
      transform:translateX(-50%);
      top:-40px;
      padding:6px 10px;
      background:#0f172a;
      color:#f9fafb;
      border-radius:999px;
      font-size:13px;
      z-index:60;
    }
    .skip-link:focus-visible{
      top:10px;
      outline:2px solid #22d3ee;
      outline-offset:2px;
    }

    /* --- Nav + Scroll Progress --- */
    .nav{
      position:fixed; top:0; left:0; right:0;
      z-index:40;
      backdrop-filter: blur(14px);
      background: linear-gradient(to bottom, rgba(15,23,42,0.95), rgba(15,23,42,0.6));
      border-bottom:1px solid rgba(148,163,184,0.1);
    }
    .nav-inner{
      max-width:1120px;
      margin:0 auto;
      padding:10px 16px 8px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      position:relative;
      gap:12px;
    }
    .nav::after{
      content:"";
      position:absolute;
      left:0; right:0; bottom:0;
      height:2px;
      background: linear-gradient(90deg, #ec4899, rgba(34,211,238,0), #22d3ee);
      transform-origin:left;
      transform:scaleX(var(--scroll));
      transition: transform 0.1s linear;
      pointer-events:none;
    }

    .brand-link{
      display:inline-flex;
      align-items:center;
      font-size:22px;
      font-weight:800;
      letter-spacing:0.05em;
      white-space:nowrap;
      text-shadow:0 0 8px rgba(236,72,153,0.6), 0 0 12px rgba(34,211,238,0.4);
      cursor:pointer;
    }
    .brand-link span.accent{
      background: linear-gradient(135deg, #f472b6, #22d3ee);
      -webkit-background-clip:text;
      color:transparent;
    }

    .nav-links{ display:flex; gap:18px; font-size:14px; flex-wrap:wrap; }
    .nav-link{ position:relative; padding-block:4px; }
    .nav-link::after{
      content:"";
      position:absolute;
      left:0; bottom:-2px;
      width:0; height:2px;
      border-radius:999px;
      background: linear-gradient(90deg, #f472b6, #22d3ee);
      box-shadow:0 0 8px rgba(56,189,248,0.8);
      transition: width 0.25s ease;
    }
    .nav-link:hover::after, .nav-link:focus-visible::after { width:100%; }
    .nav-link:focus-visible{ outline:none; }

    /* --- Layout --- */
    .section{ padding:40px 16px 8px; }
    .section:first-of-type{ padding-top:28px; }

    @media (min-width:768px){
      .hero-layout{
        display:grid;
        grid-template-columns: minmax(0, 3fr) minmax(0, 2.2fr);
        gap:32px;
        align-items:start;
      }
    }

    /* --- Hero --- */
    .category-label{
      font-size:12px;
      letter-spacing:0.25em;
      text-transform:uppercase;
      color:#f9a8d4;
      margin-bottom:6px;
    }
    .hero-title{
      font-size: clamp(32px, 5vw, 46px);
      font-weight:800;
      letter-spacing:0.01em;
      margin-bottom:10px;
      text-shadow:0 0 14px rgba(236,72,153,0.6), 0 0 20px rgba(34,211,238,0.4);
    }
    .hero-breadcrumbs{ font-size:12px; color:#9ca3af; margin-bottom:16px; }
    .hero-breadcrumbs a{ text-decoration: underline; text-underline-offset: 3px; }
    .hero-text-main{ font-size:15px; color:#e5e7eb; margin-bottom:8px; max-width:46rem; }
    .hero-text-sub{ font-size:14px; color:#cbd5f5; margin-bottom:18px; max-width:52rem; }

    .hero-pills{ display:flex; flex-wrap:wrap; gap:10px; margin-bottom:10px; }
    .hero-pill{
      border-radius:999px;
      padding:10px 14px;
      border:1px solid rgba(248,250,252,0.16);
      font-size:13px;
      background: radial-gradient(circle at top left, rgba(30,64,175,0.75), rgba(15,23,42,0.95));
      box-shadow:0 12px 30px rgba(15,23,42,0.9);
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      transition: transform 0.14s ease, box-shadow 0.14s ease, border-color 0.14s ease;
      user-select:none;
    }
    .hero-pill:hover{
      transform: translateY(-2px) scale(1.02);
      border-color: rgba(209,213,219,0.28);
      box-shadow: 0 0 18px rgba(34,211,238,0.20), 0 12px 30px rgba(2,6,23,0.75);
    }
    .hero-pill.primary{
      background: linear-gradient(135deg, #ec4899, #22d3ee);
      color:#020617;
      font-weight:800;
      border:none;
      box-shadow: 0 0 22px rgba(34,211,238,0.35), 0 0 22px rgba(236,72,153,0.25), 0 12px 30px rgba(2,6,23,0.75);
    }

    /* --- Cover --- */
    .cover-wrap{
      border-radius:18px;
      border:1px solid rgba(148,163,184,0.18);
      background: radial-gradient(circle at top left, rgba(15,23,42,0.9), rgba(15,23,42,0.98));
      box-shadow: 0 18px 45px rgba(15,23,42,0.95);
      backdrop-filter: blur(18px);
      overflow:hidden;
    }
    .cover{
      width:100%;
      aspect-ratio: 1 / 1;
      object-fit: cover;
      object-position: center;
      display:block;
      filter: saturate(.98) contrast(1.02);
      transform: scale(1.01);
    }
    .cover-caption{
      padding:12px 14px 12px;
      font-size:12px;
      color:#9ca3af;
      border-top:1px solid rgba(148,163,184,0.12);
    }

    /* --- Content blocks --- */
    .section-title{ font-size:18px; font-weight:700; margin-bottom:8px; }
    .section-subtitle{ font-size:13px; color:#9ca3af; margin-bottom:18px; max-width:52rem; }

    .card{
      border-radius:20px;
      padding:16px 18px;
      border:1px solid rgba(148,163,184,0.18);
      background: radial-gradient(circle at top left, rgba(15,23,42,0.96), rgba(15,23,42,0.99));
      box-shadow: 0 18px 40px rgba(15,23,42,0.96);
      backdrop-filter: blur(18px);
      margin-bottom:14px;
    }

    .bullets{
      display:grid;
      gap:8px;
      font-size:13px;
      color:#d1d5db;
    }

    .mini-grid{
      display:grid;
      gap:10px;
      margin-top:10px;
    }
    @media(min-width:768px){
      .mini-grid{ grid-template-columns: repeat(2, minmax(0,1fr)); }
    }
    .mini{
      border-radius:16px;
      border:1px solid rgba(148,163,184,0.18);
      background: rgba(2,6,23,0.55);
      padding:12px 12px;
      font-size:12px;
      color:#cbd5f5;
    }
    .mini strong{ color:#e5e7eb; }

    /* --- Modal (Code) --- */
    .overlay{
      position:fixed;
      inset:0;
      background: rgba(0,0,0,0.65);
      display:none;
      justify-content:center;
      align-items:center;
      padding:16px;
      z-index:60;
    }
    .overlay.show{ display:flex; }

    .panel{
      width:100%;
      max-width:980px;
      border-radius:22px;
      border:1px solid rgba(148,163,184,0.18);
      background: #020617;
      box-shadow:0 22px 60px rgba(0,0,0,0.85);
      overflow:hidden;
    }
    .panel-head{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding:14px 16px;
      border-bottom:1px solid rgba(148,163,184,0.12);
      background: linear-gradient(to bottom, rgba(15,23,42,0.95), rgba(2,6,23,0.95));
    }
    .panel-title{
      font-size:14px;
      font-weight:700;
      color:#f9fafb;
      letter-spacing:.02em;
    }
    .panel-actions{ display:flex; gap:8px; align-items:center; flex-wrap:wrap; }

    .btn-small{
      border-radius:999px;
      border:1px solid rgba(148,163,184,0.22);
      background:#111827;
      color:#e5e7eb;
      padding:8px 12px;
      font-size:13px;
      cursor:pointer;
      transition: transform .12s ease, border-color .12s ease, box-shadow .12s ease;
    }
    .btn-small:hover{
      transform: translateY(-1px);
      border-color: rgba(209,213,219,0.32);
      box-shadow: 0 0 18px rgba(34,211,238,0.12);
    }
    .btn-small.primary{
      background: linear-gradient(135deg, #34d399, #0ea5e9);
      color:#031016;
      border:none;
      font-weight:800;
    }

    .code-area{
      width:100%;
      min-height: 56vh;
      border:0;
      outline:none;
      resize: vertical;
      padding:14px 14px;
      background:#020617;
      color:#e5e7eb;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size:12px;
      line-height:1.55;
      white-space: pre;
      overflow:auto;
    }
    .panel-foot{
      padding:10px 16px 14px;
      border-top:1px solid rgba(148,163,184,0.12);
      color:#9ca3af;
      font-size:12px;
    }

    /* --- Footer --- */
    footer{
      margin-top:40px;
      padding-top:16px;
      border-top:1px solid rgba(15,23,42,0.9);
      font-size:11px;
      color:#94a3b8;
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      justify-content:space-between;
      align-items:center;
    }
    footer .center-links{ display:flex; gap:10px; }
    footer a{ text-decoration: underline; text-underline-offset: 3px; }

    /* --- Mobile tweaks --- */
    @media (max-width:767px){
      body{ padding-top:60px; }
      .nav-inner{ gap:8px; }
      .nav-links{ font-size:13px; gap:12px; }
      .section{ padding-top:32px; }
      .hero-layout{ display:block; }
      .cover-wrap{ margin-top:20px; }
    }
    @media(max-width:480px){
      .hero-pills{ flex-direction:column; }
      .hero-pill{ width:100%; }
      .panel-actions{ width:100%; }
      .btn-small{ width:100%; }
    }
  </style>
</head>

<body>
  <a href="#main" class="skip-link">Zum Inhalt springen</a>

  <!-- NAV -->
  <header class="nav">
    <div class="nav-inner">
      <a class="brand-link" href="../../index.html" aria-label="PromptRebel Home">
        Prompt<span class="accent">Rebel</span>
      </a>

      <nav class="nav-links" aria-label="Hauptnavigation">
        <a href="../../index.html#projects" class="nav-link">Projects</a>
        <a href="../../index.html#about" class="nav-link">About</a>
        <a href="../../index.html#lab-notes" class="nav-link">Lab Notes</a>
      </nav>
    </div>
  </header>

  <main class="page" id="main">
    <!-- HERO -->
    <section class="section">
      <div class="hero-layout">
        <div>
          <div class="category-label">Tools ¬∑ Helpers</div>
          <h1 class="hero-title" id="helperName">Local AI</h1>

          <div class="hero-breadcrumbs">
            <span>
              <a href="../../index.html">Home</a> ¬∑
              <a href="../tools.html">Tools</a> ¬∑
              <a href="../helpers.html">Helpers</a> ¬∑
              Local AI
            </span>
          </div>

          <p class="hero-text-main">
            Ein kleiner Website-Chatbot, der Antworten aus einfachen Wissens-Snippets zieht ‚Äì ohne Accounts, ohne Backend.
          </p>
          <p class="hero-text-sub">
            Wichtig: Das hier ist absichtlich ‚Äûsimpel & nachbaubar‚Äú (Keyword-Suche statt Magie). Ideal als Basis, um einen eigenen Bot auf einer Website zu integrieren.
          </p>

          <div class="hero-pills">
            <button id="btnOpenHelper" class="hero-pill primary" type="button">üí¨ Open Helper</button>
            <button id="btnOpenCode" class="hero-pill" type="button">üìã Code / Starter Kit</button>
          </div>

          <p class="hero-text-sub" style="font-size:12px;color:#9ca3af;margin-top:6px;">
            Hinweis: Das ‚ÄûCopy‚Äú-Kit ist ein Starter-Template. F√ºr deine echte PromptRebel-Integration m√ºssen Pfade/Kategorien angepasst werden.
          </p>
        </div>

        <!-- Cover -->
        <aside class="cover-wrap" aria-label="Local AI Cover">
          <img class="cover"
               src="./cover/localai.PNG"
               alt="Local AI ‚Äì Cover" loading="lazy" />
          <div class="cover-caption">
            Cover f√ºr die Helpers-√úbersicht & Detailseite.
          </div>
        </aside>
      </div>
    </section>

    <!-- DETAILS -->
    <section class="section" aria-labelledby="details-title">
      <h2 class="section-title" id="details-title">Was es ist (und was nicht)</h2>
      <p class="section-subtitle">Kurz & ehrlich ‚Äì damit es nicht nach ‚ÄûCopy & pray‚Äú aussieht.</p>

      <div class="card">
        <div class="bullets">
          <div>‚úÖ Autarker Chat-UI-Block f√ºr Websites</div>
          <div>‚úÖ Antworten aus <strong>lokalen Snippets</strong> (Keyword-Match)</div>
          <div>‚úÖ Einfach erweiterbar (mehr Kategorien, mehr Text, andere Trigger)</div>
          <div>‚ö†Ô∏è Kein LLM, kein Server, keine ‚Äûechte‚Äú Semantik ‚Äì bewusst simpel</div>
          <div>‚ö†Ô∏è F√ºr Produktion musst du Inhalte/Pfade an deine Website-Struktur anpassen</div>
        </div>

        <div class="mini-grid">
          <div class="mini">
            <strong>Prinzip:</strong> User-Frage ‚Üí Keywords ‚Üí passende Kategorie ‚Üí Snippet ‚Üí Antwort.
          </div>
          <div class="mini">
            <strong>Warum so?</strong> Damit jeder es ohne Backend/Key/Account nachbauen kann ‚Äì und du es leicht erkl√§ren kannst.
          </div>
        </div>
      </div>
    </section>

    <!-- HOWTO -->
    <section class="section" aria-labelledby="howto-title">
      <h2 class="section-title" id="howto-title">So passt man es an (Minimal-Checkliste)</h2>
      <p class="section-subtitle">
        Genau das ist der Punkt bei Local AI: du kopierst das Grundger√ºst ‚Äì und ersetzt dein Wissen.
      </p>

      <div class="card">
        <div class="bullets">
          <div>1) Ersetze die <strong>KNOWLEDGE</strong>-Bl√∂cke (Kategorien + Snippets)</div>
          <div>2) Pflege Keywords: lieber 10 gute als 200 generische</div>
          <div>3) Optional: verlinke in Antworten auf echte Seiten (FAQ, Imprint, Kontakt)</div>
          <div>4) Style: Farben/Fonts an deine Website anpassen</div>
        </div>
      </div>
    </section>

    <!-- FOOTER -->
    <footer>
      <div>¬© PromptRebel | CC BY-NC-SA 4.0</div>
      <div class="center-links">
        <a href="../imprint.html">Imprint</a>
        <span>¬∑</span>
        <a href="../privacy.html">Privacy</a>
      </div>
      <div>build: <span style="color:#22d3ee; text-shadow:0 0 10px rgba(34,211,238,.9);">v0.1.helper.local-ai</span></div>
    </footer>
  </main>

  <!-- CODE MODAL -->
  <div id="codeOverlay" class="overlay" aria-hidden="true">
    <div class="panel" role="dialog" aria-modal="true" aria-label="Local AI Starter Kit Code">
      <div class="panel-head">
        <div class="panel-title">Local AI ‚Äì Starter Kit (HTML Single-File)</div>
        <div class="panel-actions">
          <button id="btnCopyStarter" class="btn-small primary" type="button">‚úÖ Copy</button>
          <button id="btnCloseCode" class="btn-small" type="button">Schlie√üen</button>
        </div>
      </div>
      <textarea id="codeTextarea" class="code-area" spellcheck="false" readonly></textarea>
      <div class="panel-foot">
        Tipp: Speichere die Datei als <code>local-ai-starter.html</code> und √∂ffne sie im Browser. Dann ersetze <code>KNOWLEDGE</code> durch deine Inhalte.
      </div>
    </div>
  </div>

  <script>
    // Scroll progress
    window.addEventListener("scroll", () => {
      const doc = document.documentElement;
      const scrollable = doc.scrollHeight - window.innerHeight;
      const ratio = scrollable > 0 ? window.scrollY / scrollable : 0;
      document.documentElement.style.setProperty("--scroll", ratio.toString());
    });

    // Config
    const HELPER_URL = "./local-ai.html";

    // Starter Kit (bewusst generisch, nicht PromptRebel-spezifisch)
    const STARTER_CODE = `<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Local AI ‚Äì Starter Kit</title>
  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
      background:#020617;color:#e5e7eb;min-height:100vh;
      display:flex;align-items:center;justify-content:center;padding:16px;
    }
    .app{
      width:100%;max-width:780px;
      border-radius:22px;
      border:1px solid rgba(148,163,184,.18);
      background: radial-gradient(circle at top left, rgba(15,23,42,.96), rgba(15,23,42,.99));
      box-shadow:0 22px 60px rgba(0,0,0,.75);
      overflow:hidden;
    }
    header{
      padding:14px 16px;
      border-bottom:1px solid rgba(148,163,184,.12);
      background: linear-gradient(to bottom, rgba(15,23,42,.95), rgba(2,6,23,.95));
      display:flex;align-items:center;justify-content:space-between;gap:10px;
    }
    header .title{font-weight:800;letter-spacing:.02em}
    header .hint{font-size:12px;color:#9ca3af}
    .chat{padding:14px 16px;display:flex;flex-direction:column;gap:10px;min-height:52vh}
    .bubble{
      max-width:92%;
      border-radius:16px;
      padding:10px 12px;
      font-size:13px;
      line-height:1.55;
      border:1px solid rgba(148,163,184,.14);
      background: rgba(2,6,23,.55);
    }
    .bubble.user{align-self:flex-end;background: rgba(56,189,248,.12); border-color: rgba(56,189,248,.22)}
    .bubble.bot{align-self:flex-start}
    .meta{font-size:11px;color:#9ca3af;margin-top:2px}
    .inputbar{
      padding:12px 12px;
      border-top:1px solid rgba(148,163,184,.12);
      display:flex;gap:10px;align-items:center;
      background: rgba(2,6,23,.55);
    }
    input{
      flex:1;
      border-radius:999px;
      border:1px solid rgba(148,163,184,.18);
      background:#020617;color:#e5e7eb;
      padding:10px 12px;font-size:14px;
      outline:none;
    }
    button{
      border-radius:999px;
      border:none;
      padding:10px 14px;
      cursor:pointer;
      font-weight:800;
      background: linear-gradient(135deg, #ec4899, #22d3ee);
      color:#020617;
    }
    button:disabled{opacity:.55;cursor:not-allowed}
    .small{font-size:11px;color:#9ca3af;padding:10px 16px 14px}
    code{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}
  </style>
</head>
<body>
  <div class="app">
    <header>
      <div>
        <div class="title">Local AI ‚Äì Starter Kit</div>
        <div class="hint">Keyword-Suche in lokalen Snippets (ohne Backend)</div>
      </div>
      <div class="hint">offline-friendly</div>
    </header>

    <div id="chat" class="chat" aria-live="polite"></div>

    <div class="inputbar">
      <input id="q" type="text" placeholder="Frag etwas‚Ä¶ (z. B. √ñffnungszeiten, Kontakt, Produktinfo)" />
      <button id="send">Send</button>
    </div>

    <div class="small">
      Anpassung: Ersetze <code>KNOWLEDGE</code> (Kategorien + Keywords + Snippets) durch deine Inhalte.
    </div>
  </div>

  <script>
  (function(){
    "use strict";

    // 1) Dein Wissen: Kategorien ‚Üí Keywords ‚Üí Snippets
    const KNOWLEDGE = [
      {
        category: "Kontakt",
        keywords: ["kontakt","email","telefon","anschrift","adresse"],
        snippets: [
          "Du erreichst uns per E-Mail: example@domain.tld",
          "Telefon: +49 000 000000",
          "Adresse: Musterstra√üe 1, 12345 Musterstadt"
        ]
      },
      {
        category: "√ñffnungszeiten",
        keywords: ["√∂ffnungszeiten","ge√∂ffnet","uhrzeit","wann","zeiten"],
        snippets: [
          "Mo‚ÄìFr: 09:00‚Äì17:00",
          "Sa: 10:00‚Äì14:00",
          "So: geschlossen"
        ]
      },
      {
        category: "Produkte",
        keywords: ["produkt","sortiment","angebot","preis","kaufen"],
        snippets: [
          "Unser Sortiment findest du auf der Website unter /products.",
          "Wenn du mir sagst, was du suchst, nenne ich dir die passende Kategorie."
        ]
      }
    ];

    // 2) Rendering
    const chat = document.getElementById("chat");
    const q = document.getElementById("q");
    const send = document.getElementById("send");

    function addBubble(text, who, meta){
      const div = document.createElement("div");
      div.className = "bubble " + who;
      div.textContent = text;
      chat.appendChild(div);
      if(meta){
        const m = document.createElement("div");
        m.className = "meta";
        m.textContent = meta;
        chat.appendChild(m);
      }
      chat.scrollTop = chat.scrollHeight;
    }

    // 3) Simple Matching
    function normalize(s){
      return (s || "").toLowerCase().trim();
    }

    function answer(question){
      const nq = normalize(question);
      if(!nq) return { text: "Schreib kurz, was du wissen willst.", meta: "hint" };

      // Treffer: z√§hlt Keyword-Hits pro Kategorie
      let best = null;
      for(const item of KNOWLEDGE){
        let hits = 0;
        for(const kw of item.keywords){
          if(nq.includes(kw)) hits++;
        }
        if(hits > 0 && (!best || hits > best.hits)){
          best = { item, hits };
        }
      }

      if(!best){
        return {
          text: "Dazu habe ich in meinen Snippets nichts Passendes gefunden. Versuch‚Äôs mit einem anderen Keyword (z. B. Kontakt, √ñffnungszeiten, Produkt).",
          meta: "no match"
        };
      }

      // w√§hlt ein Snippet (hier: erstes ‚Äì du kannst randomisieren)
      const snippet = best.item.snippets[0] || "Kein Snippet vorhanden.";
      return { text: snippet, meta: "Kategorie: " + best.item.category };
    }

    function onSend(){
      const text = q.value;
      q.value = "";
      addBubble(text, "user");
      const a = answer(text);
      addBubble(a.text, "bot", a.meta);
    }

    send.addEventListener("click", onSend);
    q.addEventListener("keydown", (e) => {
      if(e.key === "Enter") onSend();
    });

    addBubble("Hi! Ich bin ein kleiner Local-AI-Starter. Frag mich was ‚Äì ich suche per Keyword in Snippets.", "bot", "ready");
  })();
  <\/script>
</body>
</html>`;

    // Helpers
    async function copyToClipboard(text) {
      if (navigator.clipboard && navigator.clipboard.writeText) {
        await navigator.clipboard.writeText(text);
        return true;
      }
      // Fallback
      const ta = document.createElement("textarea");
      ta.value = text;
      ta.setAttribute("readonly", "");
      ta.style.position = "fixed";
      ta.style.left = "-9999px";
      document.body.appendChild(ta);
      ta.select();
      const ok = document.execCommand("copy");
      document.body.removeChild(ta);
      return ok;
    }

    function flashButton(btn, okText = "‚úÖ Kopiert!") {
      const original = btn.textContent;
      btn.textContent = okText;
      btn.disabled = true;
      setTimeout(() => {
        btn.textContent = original;
        btn.disabled = false;
      }, 1800);
    }

    // Open helper
    document.getElementById("btnOpenHelper").addEventListener("click", () => {
      window.open(HELPER_URL, "_blank", "noopener,noreferrer");
    });

    // Code modal open/close
    const overlay = document.getElementById("codeOverlay");
    const ta = document.getElementById("codeTextarea");

    function openCode(){
      ta.value = STARTER_CODE;
      overlay.classList.add("show");
      overlay.setAttribute("aria-hidden", "false");
      // Fokus in den Dialog
      document.getElementById("btnCopyStarter").focus();
    }
    function closeCode(){
      overlay.classList.remove("show");
      overlay.setAttribute("aria-hidden", "true");
    }

    document.getElementById("btnOpenCode").addEventListener("click", openCode);
    document.getElementById("btnCloseCode").addEventListener("click", closeCode);

    // Close on ESC
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape" && overlay.classList.contains("show")) closeCode();
    });

    // Copy inside modal
    document.getElementById("btnCopyStarter").addEventListener("click", async () => {
      try{
        const ok = await copyToClipboard(STARTER_CODE);
        flashButton(document.getElementById("btnCopyStarter"), ok ? "‚úÖ Kopiert!" : "‚ö†Ô∏è Copy failed");
      }catch(err){
        console.error(err);
        flashButton(document.getElementById("btnCopyStarter"), "‚ö†Ô∏è Copy failed");
      }
    });

    // Click outside panel does NOT close (wie bei dir: nichts versehentlich verlieren)
  </script>
</body>
</html>
